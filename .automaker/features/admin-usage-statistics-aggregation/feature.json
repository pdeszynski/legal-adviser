{
  "category": "feature",
  "description": "Simplify the usage statistics aggregation service by leveraging the new AdminStatsService for basic counts. The UsageStatsService should now focus on more complex aggregations that aren't covered by the basic dashboard stats: time-series data (daily/monthly breakdowns), token usage (when tracked in future), cost estimation (future feature), user growth trends. Remove redundant user/document count queries that are now handled by AdminStatsService. Ensure the service remains focused on advanced analytics while basic counts come from the cached dashboard stats endpoint.",
  "id": "admin-usage-statistics-aggregation",
  "title": "Admin Usage Statistics Aggregation Service",
  "priority": 1,
  "status": "completed",
  "branchName": "002-legal-ai-core",
  "descriptionHistory": [
    {
      "description": "Create application service in backend for aggregating usage statistics across all users. Implement GraphQL queries for: getTotalDocumentCount (grouped by status), getActiveUsersCount (users active in last 24h/7d/30d), getTotalTokenUsage (daily/monthly breakdown), getQueryVolume (queries per day chart), getDocumentGenerationMetrics (average generation time, success rate), getUserGrowthStats (new users per period). Create StatsResolver with @Admin guard. Implement efficient database queries using aggregation functions and materialized views if needed. Cache results with TTL for performance. Support date range filtering for all statistics.",
      "timestamp": "2026-01-24T08:43:29.448Z",
      "source": "initial"
    },
    {
      "description": "Simplify the usage statistics aggregation service by leveraging the new AdminStatsService for basic counts. The UsageStatsService should now focus on more complex aggregations that aren't covered by the basic dashboard stats: time-series data (daily/monthly breakdowns), token usage (when tracked in future), cost estimation (future feature), user growth trends. Remove redundant user/document count queries that are now handled by AdminStatsService. Ensure the service remains focused on advanced analytics while basic counts come from the cached dashboard stats endpoint.",
      "timestamp": "2026-01-31T15:31:50.377Z",
      "source": "edit"
    }
  ],
  "updatedAt": "2026-01-24T09:19:53.354Z",
  "dependencies": [
    "admin-dashboard-stats-backend-service"
  ]
}