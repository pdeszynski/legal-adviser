{
  "category": "Uncategorized",
  "description": "## Parent Task Context (Already Completed)\n\n> **Note:** The following parent task has already been completed. This context is provided to help you understand the background and requirements for this sub-task. Do not re-implement the parent task - focus only on the new sub-task described below.\n\n### Fix Session ID UUID validation error\n\n**Description:** Fix {errors: [,…], data: null}\ndata\n: \nnull\nerrors\n: \n[,…]\n0\n: \n{message: \"Bad Request Exception\", locations: [{line: 3, column: 13}], path: [\"askLegalQuestion\"],…}\nextensions\n: \n{code: \"BAD_REQUEST\", stacktrace: [\"BadRequestException: Bad Request Exception\",…],…}\ncode\n: \n\"BAD_REQUEST\"\noriginalError\n: \n{message: [\"Session ID must be a valid UUID v4\"], error: \"Bad Request\", statusCode: 400}\nerror\n: \n\"Bad Request\"\nmessage\n: \n[\"Session ID must be a valid UUID v4\"]\nstatusCode\n: \n400\nstacktrace\n: \n[\"BadRequestException: Bad Request Exception\",…]\n0\n: \n\"BadRequestException: Bad Request Exception\"\n1\n: \n\"    at ValidationPipe.exceptionFactory (/app/node_modules/.pnpm/@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/validation.pipe.js:107:20)\"\n2\n: \n\"    at ValidationPipe.transform (/app/node_modules/.pnpm/@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/validation.pipe.js:74:30)\"\n3\n: \n\"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\"\n4\n: \n\"    at async resolveParamValue (/app/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_re_dbqbm4zvibvqpchgjldjj4kszy/node_modules/@nestjs/core/helpers/external-context-creator.js:136:31)\"\n5\n: \n\"    at async Promise.all (index 0)\"\n6\n: \n\"    at async pipesFn (/app/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_re_dbqbm4zvibvqpchgjldjj4kszy/node_modules/@nestjs/core/helpers/external-context-creator.js:138:13)\"\n7\n: \n\"    at async /app/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_re_dbqbm4zvibvqpchgjldjj4kszy/node_modules/@nestjs/core/helpers/external-context-creator.js:66:17\"\nlocations\n: \n[{line: 3, column: 13}]\n0\n: \n{line: 3, column: 13}\nmessage\n: \n\"Bad Request Exception\"\npath\n: \n[\"askLegalQuestion\"]\n0\n: \n\"askLegalQuestion\"\n\n---\n\n## Task Description\n\nFix additional errors on legal ai page. Make sure to fix other ones that could happen, Use playwright for testing, make sure to create also e2e tests. Add documdntation about runnign e2e tests. Assume that the docker compose was run and all services are up and running under http://localhost:3000\n\n{errors: [{,…}], data: null}\ndata\n: \nnull\nerrors\n: \n[{,…}]\n0\n: \n{,…}\nextensions\n: \n{code: \"INTERNAL_SERVER_ERROR\", stacktrace: [,…]}\ncode\n: \n\"INTERNAL_SERVER_ERROR\"\nstacktrace\n: \n[,…]\n0\n: \n\"QueryFailedError: insert or update on table \\\"legal_queries\\\" violates foreign key constraint \\\"FK_c173b23bdeb8b4cefceb9ea8325\\\"\"\n1\n: \n\"    at PostgresQueryRunner.query (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/driver/src/driver/postgres/PostgresQueryRunner.ts:325:19)\"\n2\n: \n\"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\"\n3\n: \n\"    at async InsertQueryBuilder.execute (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/query-builder/src/query-builder/InsertQueryBuilder.ts:164:33)\"\n4\n: \n\"    at async SubjectExecutor.executeInsertOperations (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:435:42)\"\n5\n: \n\"    at async SubjectExecutor.execute (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:137:9)\"\n6\n: \n\"    at async EntityPersistExecutor.execute (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/persistence/src/persistence/EntityPersistExecutor.ts:182:21)\"\n7\n: \n\"    at async QueriesService.askQuestion (/app/apps/backend/src/modules/queries/services/queries.service.ts:333:24)\"\nlocations\n: \n[{line: 3, column: 13}]\nmessage\n: \n\"insert or update on table \\\"legal_queries\\\" violates foreign key constraint \\\"FK_c173b23bdeb8b4cefceb9ea8325\\\"\"\npath\n: \n[\"askLegalQuestion\"]",
  "title": "Fix legal AI page errors with Playwright tests",
  "images": [],
  "imagePaths": [],
  "textFilePaths": [],
  "skipTests": false,
  "model": "claude-opus",
  "thinkingLevel": "none",
  "reasoningEffort": "none",
  "branchName": "002-legal-ai-core",
  "priority": 2,
  "planningMode": "skip",
  "requirePlanApproval": false,
  "dependencies": [
    "feature-1769198026364-o0x5dz8tw"
  ],
  "workMode": "current",
  "titleGenerating": false,
  "status": "completed",
  "id": "feature-1769198265999-mqd6c9d7g",
  "descriptionHistory": [
    {
      "description": "## Parent Task Context (Already Completed)\n\n> **Note:** The following parent task has already been completed. This context is provided to help you understand the background and requirements for this sub-task. Do not re-implement the parent task - focus only on the new sub-task described below.\n\n### Fix Session ID UUID validation error\n\n**Description:** Fix {errors: [,…], data: null}\ndata\n: \nnull\nerrors\n: \n[,…]\n0\n: \n{message: \"Bad Request Exception\", locations: [{line: 3, column: 13}], path: [\"askLegalQuestion\"],…}\nextensions\n: \n{code: \"BAD_REQUEST\", stacktrace: [\"BadRequestException: Bad Request Exception\",…],…}\ncode\n: \n\"BAD_REQUEST\"\noriginalError\n: \n{message: [\"Session ID must be a valid UUID v4\"], error: \"Bad Request\", statusCode: 400}\nerror\n: \n\"Bad Request\"\nmessage\n: \n[\"Session ID must be a valid UUID v4\"]\nstatusCode\n: \n400\nstacktrace\n: \n[\"BadRequestException: Bad Request Exception\",…]\n0\n: \n\"BadRequestException: Bad Request Exception\"\n1\n: \n\"    at ValidationPipe.exceptionFactory (/app/node_modules/.pnpm/@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/validation.pipe.js:107:20)\"\n2\n: \n\"    at ValidationPipe.transform (/app/node_modules/.pnpm/@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_reflect-metadata@0.2.2_rxjs@7.8.2/node_modules/@nestjs/common/pipes/validation.pipe.js:74:30)\"\n3\n: \n\"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\"\n4\n: \n\"    at async resolveParamValue (/app/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_re_dbqbm4zvibvqpchgjldjj4kszy/node_modules/@nestjs/core/helpers/external-context-creator.js:136:31)\"\n5\n: \n\"    at async Promise.all (index 0)\"\n6\n: \n\"    at async pipesFn (/app/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_re_dbqbm4zvibvqpchgjldjj4kszy/node_modules/@nestjs/core/helpers/external-context-creator.js:138:13)\"\n7\n: \n\"    at async /app/node_modules/.pnpm/@nestjs+core@11.1.11_@nestjs+common@11.1.11_class-transformer@0.5.1_class-validator@0.14.3_re_dbqbm4zvibvqpchgjldjj4kszy/node_modules/@nestjs/core/helpers/external-context-creator.js:66:17\"\nlocations\n: \n[{line: 3, column: 13}]\n0\n: \n{line: 3, column: 13}\nmessage\n: \n\"Bad Request Exception\"\npath\n: \n[\"askLegalQuestion\"]\n0\n: \n\"askLegalQuestion\"\n\n---\n\n## Task Description\n\nFix additional errors on legal ai page. Make sure to fix other ones that could happen, Use playwright for testing, make sure to create also e2e tests. Add documdntation about runnign e2e tests. Assume that the docker compose was run and all services are up and running under http://localhost:3000\n\n{errors: [{,…}], data: null}\ndata\n: \nnull\nerrors\n: \n[{,…}]\n0\n: \n{,…}\nextensions\n: \n{code: \"INTERNAL_SERVER_ERROR\", stacktrace: [,…]}\ncode\n: \n\"INTERNAL_SERVER_ERROR\"\nstacktrace\n: \n[,…]\n0\n: \n\"QueryFailedError: insert or update on table \\\"legal_queries\\\" violates foreign key constraint \\\"FK_c173b23bdeb8b4cefceb9ea8325\\\"\"\n1\n: \n\"    at PostgresQueryRunner.query (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/driver/src/driver/postgres/PostgresQueryRunner.ts:325:19)\"\n2\n: \n\"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\"\n3\n: \n\"    at async InsertQueryBuilder.execute (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/query-builder/src/query-builder/InsertQueryBuilder.ts:164:33)\"\n4\n: \n\"    at async SubjectExecutor.executeInsertOperations (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:435:42)\"\n5\n: \n\"    at async SubjectExecutor.execute (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/persistence/src/persistence/SubjectExecutor.ts:137:9)\"\n6\n: \n\"    at async EntityPersistExecutor.execute (/app/node_modules/.pnpm/typeorm@0.3.28_ioredis@5.8.2_pg@8.16.3_ts-node@10.9.2_@types+node@22.19.3_typescript@5.9.3_/node_modules/typeorm/persistence/src/persistence/EntityPersistExecutor.ts:182:21)\"\n7\n: \n\"    at async QueriesService.askQuestion (/app/apps/backend/src/modules/queries/services/queries.service.ts:333:24)\"\nlocations\n: \n[{line: 3, column: 13}]\nmessage\n: \n\"insert or update on table \\\"legal_queries\\\" violates foreign key constraint \\\"FK_c173b23bdeb8b4cefceb9ea8325\\\"\"\npath\n: \n[\"askLegalQuestion\"]",
      "timestamp": "2026-01-23T19:57:46.097Z",
      "source": "initial"
    }
  ],
  "startedAt": "2026-01-23T20:12:21.745Z",
  "updatedAt": "2026-01-23T20:26:04.465Z"
}