{
  "category": "bug",
  "description": "Create comprehensive Playwright E2E tests for the refactored clarification flow using the type discriminator pattern. Test scenarios: 1) AI returns clarification response with type=CLARIFICATION_QUESTION, 2) Frontend renders ClarificationMessage component based on type (not JSON parsing), 3) User submits answers, which are sent with type=CLARIFICATION_ANSWER, 4) Backend processes answers and returns final response with type=TEXT, 5) Chat history correctly shows all message types after refresh, 6) Verify no JSON parsing errors in frontend console, 7) Test page refresh during pending clarification, 8) Verify type field is correctly persisted in database. Ensure tests prove the type discriminator approach works correctly.",
  "id": "create-clarification-e2e-tests-with-type-discriminator",
  "title": "Create E2E Tests for Clarification Flow with Type Discriminator",
  "priority": 2,
  "status": "verified",
  "branchName": "refactor-chat-messaging",
  "descriptionHistory": [
    {
      "description": "Create comprehensive Playwright E2E tests for the refactored clarification flow using the type discriminator pattern. Test scenarios: 1) AI returns clarification response with type=CLARIFICATION_QUESTION, 2) Frontend renders ClarificationMessage component based on type (not JSON parsing), 3) User submits answers, which are sent with type=CLARIFICATION_ANSWER, 4) Backend processes answers and returns final response with type=TEXT, 5) Chat history correctly shows all message types after refresh, 6) Verify no JSON parsing errors in frontend console, 7) Test page refresh during pending clarification, 8) Verify type field is correctly persisted in database. Ensure tests prove the type discriminator approach works correctly.",
      "timestamp": "2026-01-29T08:01:26.923Z",
      "source": "initial"
    }
  ],
  "updatedAt": "2026-01-29T09:40:23.196Z",
  "startedAt": "2026-01-29T09:06:03.777Z"
}