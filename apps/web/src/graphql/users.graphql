# User GraphQL Operations
# Contains queries and mutations for user management

#import "./fragments/user.graphql"
#import "./fragments/pagination.graphql"

# Query: Get list of users (nestjs-query Connection format)
query GetUsers(
  $filter: UserFilter
  $paging: CursorPaging
  $sorting: [UserSort!]
) {
  users(filter: $filter, paging: $paging, sorting: $sorting) {
    totalCount
    edges {
      node {
        ...UserDetailFragment
      }
    }
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
  }
}

# Query: Get a single user by ID
query GetUser($id: ID!) {
  user(id: $id) {
    ...UserDetailFragment
  }
}

# Mutation: Create a new user (nestjs-query format)
mutation CreateOneUser($input: CreateOneUserInput!) {
  createOneUser(input: $input) {
    ...UserDetailFragment
  }
}

# Mutation: Update an existing user (nestjs-query format)
mutation UpdateOneUser($input: UpdateOneUserInput!) {
  updateOneUser(input: $input) {
    ...UserDetailFragment
  }
}

# Mutation: Delete a user (nestjs-query format)
mutation DeleteOneUser($input: DeleteOneUserInput!) {
  deleteOneUser(input: $input) {
    id
    email
  }
}
